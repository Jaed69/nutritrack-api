{
	"info": {
		"_postman_id": "modulo5-tracking-uuid",
		"name": "NutriTrack - Módulo 5: Tracking de Actividades",
		"description": "Colección de endpoints para el tracking de actividades diarias:\n- US-21: Ver actividades del día (plan y rutina)\n- US-22: Marcar actividades como completadas (registrar comidas y ejercicios)\n- US-23: Desmarcar actividades (eliminar registros)\n\nMódulo 5: Seguimiento y registro de progreso diario",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "US-21: Ver Actividades del Día",
			"item": [
				{
					"name": "Ver actividades del plan de HOY",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/usuario/registros/plan/hoy",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"usuario",
								"registros",
								"plan",
								"hoy"
							]
						},
						"description": "Obtiene las comidas programadas para el día actual del plan activo del usuario, mostrando cuáles ya fueron registradas y cuáles faltan por completar.\n\nRespuesta incluye:\n- Fecha y día actual del plan\n- Calorías objetivo vs consumidas\n- Lista de comidas del día con estado de registro"
					},
					"response": []
				},
				{
					"name": "Ver actividades del plan de una FECHA específica",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/usuario/registros/plan/dia?fecha=2025-11-05",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"usuario",
								"registros",
								"plan",
								"dia"
							],
							"query": [
								{
									"key": "fecha",
									"value": "2025-11-05",
									"description": "Fecha en formato YYYY-MM-DD"
								}
							]
						},
						"description": "Consulta las actividades del plan para una fecha específica.\n\nPermite revisar el historial de días anteriores o planificar días futuros."
					},
					"response": []
				},
				{
					"name": "Ver ejercicios de la rutina de HOY",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/usuario/registros/rutina/hoy",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"usuario",
								"registros",
								"rutina",
								"hoy"
							]
						},
						"description": "Obtiene los ejercicios programados para hoy según la rutina activa del usuario.\n\nMuestra:\n- Semana actual de la rutina\n- Ejercicios del día con series/repeticiones objetivo\n- Estado de completado de cada ejercicio"
					},
					"response": []
				},
				{
					"name": "Ver ejercicios de la rutina de una FECHA específica",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/usuario/registros/rutina/dia?fecha=2025-11-05",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"usuario",
								"registros",
								"rutina",
								"dia"
							],
							"query": [
								{
									"key": "fecha",
									"value": "2025-11-05",
									"description": "Fecha en formato YYYY-MM-DD"
								}
							]
						},
						"description": "Consulta los ejercicios de la rutina para una fecha específica."
					},
					"response": []
				}
			],
			"description": "Endpoints para visualizar las actividades programadas del día según el plan y rutina activos del usuario."
		},
		{
			"name": "US-22: Registrar Actividades (Marcar como completadas)",
			"item": [
				{
					"name": "Registrar comida realizada",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"comidaId\": 1,\n  \"usuarioPlanId\": 2,\n  \"fecha\": \"2025-11-05\",\n  \"hora\": \"13:30:00\",\n  \"tipoComida\": \"ALMUERZO\",\n  \"porciones\": 1.5,\n  \"caloriasConsumidas\": 520.00,\n  \"notas\": \"Almuerzo post-entrenamiento. Porción extra de proteína.\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/usuario/registros/comidas",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"usuario",
								"registros",
								"comidas"
							]
						},
						"description": "Registra una comida realizada por el usuario.\n\n**Validaciones:**\n- RN21: No se puede registrar si el plan está PAUSADO o CANCELADO\n- RN25: Cálculo automático de calorías basado en porciones\n\n**Campos:**\n- comidaId: ID de la comida del catálogo\n- usuarioPlanId: ID del plan asignado (opcional)\n- fecha: Fecha de consumo (YYYY-MM-DD)\n- hora: Hora de consumo (HH:mm:ss)\n- tipoComida: DESAYUNO, ALMUERZO, CENA, SNACK, etc.\n- porciones: Cantidad consumida\n- caloriasConsumidas: Calorías totales\n- notas: Observaciones opcionales"
					},
					"response": []
				},
				{
					"name": "Registrar ejercicio realizado",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"ejercicioId\": 1,\n  \"usuarioRutinaId\": 1,\n  \"fecha\": \"2025-11-05\",\n  \"hora\": \"06:30:00\",\n  \"seriesRealizadas\": 4,\n  \"repeticionesRealizadas\": 15,\n  \"pesoUtilizado\": null,\n  \"duracionMinutos\": 12,\n  \"caloriasQuemadas\": 180.00,\n  \"notas\": \"Excelente sesión de HIIT matutino. Me siento con mucha energía.\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/usuario/registros/ejercicios",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"usuario",
								"registros",
								"ejercicios"
							]
						},
						"description": "Registra un ejercicio realizado por el usuario.\n\n**Validaciones:**\n- RN21: No se puede registrar si la rutina está PAUSADA o CANCELADA\n- RN25: Cálculo automático de calorías quemadas\n\n**Campos:**\n- ejercicioId: ID del ejercicio del catálogo\n- usuarioRutinaId: ID de la rutina asignada (opcional)\n- fecha: Fecha de realización\n- hora: Hora de inicio\n- seriesRealizadas: Series completadas\n- repeticionesRealizadas: Repeticiones por serie\n- pesoUtilizado: Peso en kg (opcional, para ejercicios con peso)\n- duracionMinutos: Duración total del ejercicio\n- caloriasQuemadas: Calorías estimadas quemadas\n- notas: Observaciones opcionales"
					},
					"response": []
				}
			],
			"description": "Endpoints para registrar actividades completadas (comidas consumidas y ejercicios realizados)."
		},
		{
			"name": "US-23: Eliminar Registros (Desmarcar actividades)",
			"item": [
				{
					"name": "Eliminar registro de comida",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/usuario/registros/comidas/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"usuario",
								"registros",
								"comidas",
								"1"
							]
						},
						"description": "Elimina un registro de comida por error en el registro.\n\nPermite desmarcar una comida que fue registrada incorrectamente.\n\n**Validación:**\n- Solo el dueño del registro puede eliminarlo"
					},
					"response": []
				},
				{
					"name": "Eliminar registro de ejercicio",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/usuario/registros/ejercicios/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"usuario",
								"registros",
								"ejercicios",
								"1"
							]
						},
						"description": "Elimina un registro de ejercicio por error en el registro.\n\nPermite desmarcar un ejercicio que fue registrado incorrectamente.\n\n**Validación:**\n- Solo el dueño del registro puede eliminarlo"
					},
					"response": []
				}
			],
			"description": "Endpoints para eliminar registros de actividades (útil cuando se registró por error)."
		},
		{
			"name": "Historial y Consultas",
			"item": [
				{
					"name": "Historial de comidas registradas",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/usuario/registros/comidas/historial?fechaInicio=2025-11-01&fechaFin=2025-11-05",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"usuario",
								"registros",
								"comidas",
								"historial"
							],
							"query": [
								{
									"key": "fechaInicio",
									"value": "2025-11-01",
									"description": "Fecha inicial del rango (YYYY-MM-DD)"
								},
								{
									"key": "fechaFin",
									"value": "2025-11-05",
									"description": "Fecha final del rango (YYYY-MM-DD)"
								}
							]
						},
						"description": "Consulta el historial de comidas registradas en un rango de fechas.\n\nÚtil para:\n- Revisar el cumplimiento del plan\n- Análisis de patrones alimenticios\n- Generación de reportes\n\n**Parámetros:**\n- fechaInicio: Fecha inicial del rango\n- fechaFin: Fecha final del rango\n\nSi no se especifican fechas, devuelve los últimos 7 días."
					},
					"response": []
				},
				{
					"name": "Historial de ejercicios registrados",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/usuario/registros/ejercicios/historial?fechaInicio=2025-11-01&fechaFin=2025-11-05",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"usuario",
								"registros",
								"ejercicios",
								"historial"
							],
							"query": [
								{
									"key": "fechaInicio",
									"value": "2025-11-01",
									"description": "Fecha inicial del rango (YYYY-MM-DD)"
								},
								{
									"key": "fechaFin",
									"value": "2025-11-05",
									"description": "Fecha final del rango (YYYY-MM-DD)"
								}
							]
						},
						"description": "Consulta el historial de ejercicios registrados en un rango de fechas.\n\nÚtil para:\n- Seguimiento del progreso\n- Análisis de adherencia a la rutina\n- Evaluación de rendimiento\n\n**Parámetros:**\n- fechaInicio: Fecha inicial del rango\n- fechaFin: Fecha final del rango\n\nSi no se especifican fechas, devuelve los últimos 7 días."
					},
					"response": []
				},
				{
					"name": "Obtener detalle de registro de comida",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/usuario/registros/comidas/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"usuario",
								"registros",
								"comidas",
								"1"
							]
						},
						"description": "Obtiene el detalle completo de un registro de comida específico.\n\nMuestra toda la información del registro incluyendo:\n- Comida consumida\n- Porciones y calorías\n- Fecha y hora\n- Notas del usuario"
					},
					"response": []
				},
				{
					"name": "Obtener detalle de registro de ejercicio",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/usuario/registros/ejercicios/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"usuario",
								"registros",
								"ejercicios",
								"1"
							]
						},
						"description": "Obtiene el detalle completo de un registro de ejercicio específico.\n\nMuestra toda la información del registro incluyendo:\n- Ejercicio realizado\n- Series, repeticiones y peso usado\n- Duración y calorías quemadas\n- Fecha, hora y notas"
					},
					"response": []
				}
			],
			"description": "Endpoints para consultar el historial de registros y obtener detalles específicos."
		},
		{
			"name": "Escenarios de Prueba Completos",
			"item": [
				{
					"name": "FLUJO COMPLETO: Día típico de usuario",
					"item": [
						{
							"name": "1. Login",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Login exitoso\", function () {",
											"    pm.response.to.have.status(200);",
											"    var jsonData = pm.response.json();",
											"    pm.environment.set(\"access_token\", jsonData.accessToken);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"demo@nutritrack.com\",\n  \"password\": \"Demo123!\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/api/v1/auth/login",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"v1",
										"auth",
										"login"
									]
								}
							},
							"response": []
						},
						{
							"name": "2. Ver plan del día",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Obtiene actividades del plan\", function () {",
											"    pm.response.to.have.status(200);",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData).to.have.property('comidas');",
											"    pm.expect(jsonData.comidas).to.be.an('array');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/v1/usuario/registros/plan/hoy",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"v1",
										"usuario",
										"registros",
										"plan",
										"hoy"
									]
								}
							},
							"response": []
						},
						{
							"name": "3. Registrar desayuno",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Comida registrada exitosamente\", function () {",
											"    pm.response.to.have.status(201);",
											"    var jsonData = pm.response.json();",
											"    pm.environment.set(\"registro_comida_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"comidaId\": 1,\n  \"usuarioPlanId\": 2,\n  \"fecha\": \"{{$isoTimestamp}}\",\n  \"hora\": \"07:30:00\",\n  \"tipoComida\": \"DESAYUNO\",\n  \"porciones\": 1.0,\n  \"caloriasConsumidas\": 450.00,\n  \"notas\": \"Desayuno completo\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/api/v1/usuario/registros/comidas",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"v1",
										"usuario",
										"registros",
										"comidas"
									]
								}
							},
							"response": []
						},
						{
							"name": "4. Ver rutina del día",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Obtiene ejercicios de la rutina\", function () {",
											"    pm.response.to.have.status(200);",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData).to.have.property('ejercicios');",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/v1/usuario/registros/rutina/hoy",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"v1",
										"usuario",
										"registros",
										"rutina",
										"hoy"
									]
								}
							},
							"response": []
						},
						{
							"name": "5. Registrar ejercicio matutino",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Ejercicio registrado exitosamente\", function () {",
											"    pm.response.to.have.status(201);",
											"    var jsonData = pm.response.json();",
											"    pm.environment.set(\"registro_ejercicio_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"ejercicioId\": 1,\n  \"usuarioRutinaId\": 1,\n  \"fecha\": \"{{$isoTimestamp}}\",\n  \"hora\": \"06:30:00\",\n  \"seriesRealizadas\": 4,\n  \"repeticionesRealizadas\": 15,\n  \"duracionMinutos\": 12,\n  \"caloriasQuemadas\": 180.00,\n  \"notas\": \"HIIT matutino intenso\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/api/v1/usuario/registros/ejercicios",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"v1",
										"usuario",
										"registros",
										"ejercicios"
									]
								}
							},
							"response": []
						},
						{
							"name": "6. Ver historial de la semana",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/v1/usuario/registros/comidas/historial",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"v1",
										"usuario",
										"registros",
										"comidas",
										"historial"
									]
								}
							},
							"response": []
						}
					],
					"description": "Flujo completo que simula el día típico de un usuario:\n1. Login\n2. Revisar plan del día\n3. Registrar desayuno\n4. Revisar rutina del día\n5. Registrar ejercicio matutino\n6. Ver historial de la semana"
				}
			],
			"description": "Colección de flujos completos para probar escenarios de uso real."
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "access_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "registro_comida_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "registro_ejercicio_id",
			"value": "",
			"type": "string"
		}
	]
}
