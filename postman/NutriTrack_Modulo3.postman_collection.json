{
	"info": {
		"_postman_id": "modulo3-planes-rutinas-2024",
		"name": "NutriTrack - Módulo 3: Planes y Rutinas",
		"description": "Colección de pruebas para Módulo 3: Gestor de Catálogo de Metas (Planes Nutricionales y Rutinas de Ejercicio)\n\n**Desarrollado por:** Jhamil Peña\n**User Stories:** US-11 a US-15\n**Reglas de Negocio:** RN11, RN14, RN28\n\n## Endpoints Disponibles\n\n### Planes Nutricionales\n- Crear plan (US-11)\n- Listar planes (US-13)\n- Obtener plan por ID\n- Actualizar plan (US-12)\n- Eliminar plan (US-14)\n- Listar planes activos (RN28)\n- Agregar día al plan (US-12)\n- Listar días del plan\n- Eliminar día del plan\n\n### Rutinas de Ejercicio\n- Crear rutina (US-11)\n- Listar rutinas (US-13)\n- Obtener rutina por ID\n- Actualizar rutina (US-12)\n- Eliminar rutina (US-14)\n- Listar rutinas activas (RN28)\n- Agregar ejercicio a rutina (US-15)\n- Listar ejercicios de rutina\n- Actualizar ejercicio en rutina\n- Eliminar ejercicio de rutina\n\n## Credenciales\n\n**Admin:**\n- Email: admin@nutritrack.com\n- Password: Admin123!\n\n**Usuario Regular:**\n- Email: demo@nutritrack.com\n- Password: Demo123!\n\n## Notas Importantes\n\n- Solo usuarios con rol ADMIN pueden acceder a estos endpoints\n- RN11: Los nombres de planes deben ser únicos\n- RN14: Los nombres de rutinas deben ser únicos\n- RN28: Solo elementos activos pueden ser asignados a usuarios",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "0. Autenticación",
			"item": [
				{
					"name": "Login Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"jwt_token\", jsonData.token);",
									"    pm.environment.set(\"user_id\", jsonData.userId);",
									"    console.log(\"Token JWT guardado: \" + jsonData.token.substring(0, 20) + \"...\");",
									"    ",
									"    pm.test(\"Login exitoso\", function () {",
									"        pm.response.to.have.status(200);",
									"    });",
									"    ",
									"    pm.test(\"Token JWT presente\", function () {",
									"        pm.expect(jsonData.token).to.be.a('string');",
									"        pm.expect(jsonData.token.length).to.be.above(20);",
									"    });",
									"    ",
									"    pm.test(\"Usuario es Admin\", function () {",
									"        pm.expect(jsonData.email).to.eql(\"admin@nutritrack.com\");",
									"        pm.expect(jsonData.rol).to.eql(\"ROLE_ADMIN\");",
									"    });",
									"} else {",
									"    pm.test(\"Error en login: \" + pm.response.code, function() {",
									"        pm.response.to.have.status(200);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"admin@nutritrack.com\",\n    \"password\": \"Admin123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "Autenticación como administrador para acceder a los endpoints del Módulo 3.\n\nSolo usuarios con rol ADMIN pueden gestionar planes y rutinas."
					},
					"response": []
				}
			],
			"description": "Endpoints de autenticación. El módulo 3 requiere rol ADMIN."
		},
		{
			"name": "1. Planes Nutricionales",
			"item": [
				{
					"name": "1.1 Crear Plan (US-11)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"plan_id\", jsonData.id);",
									"    ",
									"    pm.test(\"Plan creado exitosamente\", function () {",
									"        pm.response.to.have.status(201);",
									"    });",
									"    ",
									"    pm.test(\"Plan tiene ID\", function () {",
									"        pm.expect(jsonData.id).to.be.a('number');",
									"    });",
									"    ",
									"    pm.test(\"Plan tiene nombre correcto\", function () {",
									"        pm.expect(jsonData.nombre).to.include(\"Prueba\");",
									"    });",
									"    ",
									"    pm.test(\"Plan está activo\", function () {",
									"        pm.expect(jsonData.activo).to.be.true;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Plan Prueba API - Pérdida de Peso\",\n    \"descripcion\": \"Plan de prueba creado desde Postman para validar endpoint de creación\",\n    \"duracionDias\": 30,\n    \"activo\": true,\n    \"objetivos\": {\n        \"caloriasObjetivo\": 2000.0,\n        \"proteinasObjetivo\": 150.0,\n        \"carbohidratosObjetivo\": 200.0,\n        \"grasasObjetivo\": 65.0,\n        \"descripcion\": \"Objetivos nutricionales para pérdida de peso saludable\"\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/planes",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"planes"
							]
						},
						"description": "**US-11:** Crear Meta del Catálogo (Plan)\n\n**RN11:** El nombre del plan debe ser único en el sistema.\n\nCrea un nuevo plan nutricional con objetivos de macronutrientes."
					},
					"response": []
				},
				{
					"name": "1.2 Listar Todos los Planes (US-13)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Respuesta es un array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Hay planes en el sistema\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.length).to.be.above(0);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/planes",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"planes"
							]
						},
						"description": "**US-13:** Ver Catálogo de Metas (Admin)\n\nLista todos los planes nutricionales del sistema, tanto activos como inactivos."
					},
					"response": []
				},
				{
					"name": "1.3 Listar Planes Activos (RN28)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Todos los planes están activos\", function () {",
									"    var jsonData = pm.response.json();",
									"    jsonData.forEach(function(plan) {",
									"        pm.expect(plan.activo).to.be.true;",
									"    });",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/planes/activos",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"planes",
								"activos"
							]
						},
						"description": "**RN28:** Solo elementos activos pueden ser asignados\n\nLista únicamente los planes que están activos y pueden ser asignados a usuarios."
					},
					"response": []
				},
				{
					"name": "1.4 Obtener Plan por ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Plan tiene estructura completa\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('nombre');",
									"    pm.expect(jsonData).to.have.property('descripcion');",
									"    pm.expect(jsonData).to.have.property('duracionDias');",
									"    pm.expect(jsonData).to.have.property('activo');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/planes/{{plan_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"planes",
								"{{plan_id}}"
							]
						},
						"description": "Obtiene los detalles completos de un plan específico por su ID."
					},
					"response": []
				},
				{
					"name": "1.5 Actualizar Plan (US-12)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Plan actualizado correctamente\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.nombre).to.include(\"Actualizado\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Plan Prueba API - Actualizado\",\n    \"descripcion\": \"Plan actualizado desde Postman\",\n    \"duracionDias\": 45,\n    \"activo\": true,\n    \"objetivos\": {\n        \"caloriasObjetivo\": 2200.0,\n        \"proteinasObjetivo\": 160.0,\n        \"carbohidratosObjetivo\": 220.0,\n        \"grasasObjetivo\": 70.0,\n        \"descripcion\": \"Objetivos ajustados\"\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/planes/{{plan_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"planes",
								"{{plan_id}}"
							]
						},
						"description": "**US-12:** Gestionar Meta (configurar)\n\nActualiza la información de un plan existente."
					},
					"response": []
				},
				{
					"name": "1.6 Agregar Día al Plan (US-12)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"dia_id\", jsonData.id);",
									"    ",
									"    pm.test(\"Día agregado exitosamente\", function () {",
									"        pm.response.to.have.status(201);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"numeroDia\": 1,\n    \"tipoComida\": \"DESAYUNO\",\n    \"idComida\": 1,\n    \"notas\": \"Desayuno alto en proteínas para día 1\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/planes/{{plan_id}}/dias",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"planes",
								"{{plan_id}}",
								"dias"
							]
						},
						"description": "**US-12:** Gestionar Meta (configurar días)\n\nAgrega un día con su comida correspondiente al plan.\n\nTipos de comida disponibles:\n- DESAYUNO\n- ALMUERZO\n- CENA\n- SNACK\n- PRE_ENTRENAMIENTO\n- POST_ENTRENAMIENTO\n- COLACION"
					},
					"response": []
				},
				{
					"name": "1.7 Listar Días del Plan",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Respuesta es un array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/planes/{{plan_id}}/dias",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"planes",
								"{{plan_id}}",
								"dias"
							]
						},
						"description": "Lista todos los días configurados para un plan específico."
					},
					"response": []
				},
				{
					"name": "1.8 Eliminar Día del Plan",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/planes/{{plan_id}}/dias/{{dia_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"planes",
								"{{plan_id}}",
								"dias",
								"{{dia_id}}"
							]
						},
						"description": "Elimina un día específico de un plan."
					},
					"response": []
				},
				{
					"name": "1.9 Eliminar Plan (US-14)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/planes/{{plan_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"planes",
								"{{plan_id}}"
							]
						},
						"description": "**US-14:** Eliminar Meta\n\nRealiza un soft delete del plan (marca como inactivo)."
					},
					"response": []
				}
			],
			"description": "Gestión completa de Planes Nutricionales del Módulo 3.",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "2. Rutinas de Ejercicio",
			"item": [
				{
					"name": "2.1 Crear Rutina (US-11)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"rutina_id\", jsonData.id);",
									"    ",
									"    pm.test(\"Rutina creada exitosamente\", function () {",
									"        pm.response.to.have.status(201);",
									"    });",
									"    ",
									"    pm.test(\"Rutina tiene ID\", function () {",
									"        pm.expect(jsonData.id).to.be.a('number');",
									"    });",
									"    ",
									"    pm.test(\"Rutina está activa\", function () {",
									"        pm.expect(jsonData.activo).to.be.true;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Rutina Prueba API - Fuerza Total\",\n    \"descripcion\": \"Rutina de prueba creada desde Postman para validar endpoint\",\n    \"nivelDificultad\": \"INTERMEDIO\",\n    \"duracionEstimadaMin\": 45,\n    \"activo\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/rutinas",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"rutinas"
							]
						},
						"description": "**US-11:** Crear Meta del Catálogo (Rutina)\n\n**RN14:** El nombre de la rutina debe ser único en el sistema.\n\nNiveles de dificultad:\n- PRINCIPIANTE\n- INTERMEDIO\n- AVANZADO\n- EXPERTO"
					},
					"response": []
				},
				{
					"name": "2.2 Listar Todas las Rutinas (US-13)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Respuesta es un array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Hay rutinas en el sistema\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.length).to.be.above(0);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/rutinas",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"rutinas"
							]
						},
						"description": "**US-13:** Ver Catálogo de Metas (Admin)\n\nLista todas las rutinas del sistema, tanto activas como inactivas."
					},
					"response": []
				},
				{
					"name": "2.3 Listar Rutinas Activas (RN28)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Todas las rutinas están activas\", function () {",
									"    var jsonData = pm.response.json();",
									"    jsonData.forEach(function(rutina) {",
									"        pm.expect(rutina.activo).to.be.true;",
									"    });",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/rutinas/activas",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"rutinas",
								"activas"
							]
						},
						"description": "**RN28:** Solo elementos activos pueden ser asignados\n\nLista únicamente las rutinas activas que pueden ser asignadas a usuarios."
					},
					"response": []
				},
				{
					"name": "2.4 Obtener Rutina por ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Rutina tiene estructura completa\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('id');",
									"    pm.expect(jsonData).to.have.property('nombre');",
									"    pm.expect(jsonData).to.have.property('descripcion');",
									"    pm.expect(jsonData).to.have.property('nivelDificultad');",
									"    pm.expect(jsonData).to.have.property('activo');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/rutinas/{{rutina_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"rutinas",
								"{{rutina_id}}"
							]
						},
						"description": "Obtiene los detalles completos de una rutina específica por su ID."
					},
					"response": []
				},
				{
					"name": "2.5 Actualizar Rutina (US-12)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Rutina actualizada correctamente\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.nombre).to.include(\"Actualizada\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Rutina Prueba API - Actualizada\",\n    \"descripcion\": \"Rutina actualizada desde Postman\",\n    \"nivelDificultad\": \"AVANZADO\",\n    \"duracionEstimadaMin\": 60,\n    \"activo\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/rutinas/{{rutina_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"rutinas",
								"{{rutina_id}}"
							]
						},
						"description": "**US-12:** Gestionar Meta (configurar rutinas)\n\nActualiza la información de una rutina existente."
					},
					"response": []
				},
				{
					"name": "2.6 Agregar Ejercicio a Rutina (US-15)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    pm.test(\"Ejercicio agregado exitosamente\", function () {",
									"        pm.response.to.have.status(201);",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"idEjercicio\": 1,\n    \"orden\": 1,\n    \"series\": 4,\n    \"repeticiones\": 12,\n    \"duracionSegundos\": null,\n    \"pesoKg\": null,\n    \"notas\": \"Forma estricta, descanso 60 segundos entre series\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/rutinas/{{rutina_id}}/ejercicios",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"rutinas",
								"{{rutina_id}}",
								"ejercicios"
							]
						},
						"description": "**US-15:** Ensamblar Rutinas\n\nAgrega un ejercicio del catálogo a la rutina con sus parámetros específicos (series, repeticiones, etc.)."
					},
					"response": []
				},
				{
					"name": "2.7 Listar Ejercicios de Rutina",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Respuesta es un array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/rutinas/{{rutina_id}}/ejercicios",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"rutinas",
								"{{rutina_id}}",
								"ejercicios"
							]
						},
						"description": "Lista todos los ejercicios configurados en una rutina específica, ordenados por su orden de ejecución."
					},
					"response": []
				},
				{
					"name": "2.8 Actualizar Ejercicio en Rutina",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"orden\": 1,\n    \"series\": 5,\n    \"repeticiones\": 10,\n    \"duracionSegundos\": null,\n    \"pesoKg\": 20.0,\n    \"notas\": \"Aumentar peso progresivamente cada semana\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/rutinas/{{rutina_id}}/ejercicios/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"rutinas",
								"{{rutina_id}}",
								"ejercicios",
								"1"
							]
						},
						"description": "Actualiza los parámetros de un ejercicio específico dentro de una rutina."
					},
					"response": []
				},
				{
					"name": "2.9 Eliminar Ejercicio de Rutina",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/rutinas/{{rutina_id}}/ejercicios/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"rutinas",
								"{{rutina_id}}",
								"ejercicios",
								"1"
							]
						},
						"description": "Elimina un ejercicio específico de una rutina."
					},
					"response": []
				},
				{
					"name": "2.10 Eliminar Rutina (US-14)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/rutinas/{{rutina_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"rutinas",
								"{{rutina_id}}"
							]
						},
						"description": "**US-14:** Eliminar Meta\n\nRealiza un soft delete de la rutina (marca como inactiva)."
					},
					"response": []
				}
			],
			"description": "Gestión completa de Rutinas de Ejercicio del Módulo 3."
		},
		{
			"name": "3. Validaciones RN",
			"item": [
				{
					"name": "3.1 RN11 - Validar Nombre Plan Único",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 400 (Bad Request)\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Mensaje indica nombre duplicado\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.include(\"nombre\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Plan Pérdida de Grasa Efectiva\",\n    \"descripcion\": \"Este plan ya existe en el sistema\",\n    \"duracionDias\": 30,\n    \"activo\": true,\n    \"objetivos\": {\n        \"caloriasObjetivo\": 2000.0,\n        \"proteinasObjetivo\": 150.0,\n        \"carbohidratosObjetivo\": 200.0,\n        \"grasasObjetivo\": 65.0,\n        \"descripcion\": \"Test duplicado\"\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/planes",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"planes"
							]
						},
						"description": "**RN11:** Validar que el nombre del plan debe ser único.\n\nEste test debe fallar con error 400 indicando nombre duplicado."
					},
					"response": []
				},
				{
					"name": "3.2 RN14 - Validar Nombre Rutina Único",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 400 (Bad Request)\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"Mensaje indica nombre duplicado\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.include(\"nombre\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"HIIT Quema Grasa Intenso\",\n    \"descripcion\": \"Esta rutina ya existe en el sistema\",\n    \"nivelDificultad\": \"INTERMEDIO\",\n    \"duracionEstimadaMin\": 30,\n    \"activo\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/admin/rutinas",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"rutinas"
							]
						},
						"description": "**RN14:** Validar que el nombre de la rutina debe ser único.\n\nEste test debe fallar con error 400 indicando nombre duplicado."
					},
					"response": []
				},
				{
					"name": "3.3 RN28 - Verificar Solo Planes Activos",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"No se retornan planes inactivos\", function () {",
									"    var jsonData = pm.response.json();",
									"    var planesInactivos = jsonData.filter(plan => plan.activo === false);",
									"    pm.expect(planesInactivos.length).to.equal(0);",
									"});",
									"",
									"pm.test(\"Todos los planes están activos\", function () {",
									"    var jsonData = pm.response.json();",
									"    jsonData.forEach(function(plan) {",
									"        pm.expect(plan.activo).to.be.true;",
									"    });",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/planes/activos",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"planes",
								"activos"
							]
						},
						"description": "**RN28:** Solo elementos activos pueden ser asignados.\n\nVerifica que el endpoint /activos solo retorna planes con activo=true."
					},
					"response": []
				},
				{
					"name": "3.4 RN28 - Verificar Solo Rutinas Activas",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code es 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"No se retornan rutinas inactivas\", function () {",
									"    var jsonData = pm.response.json();",
									"    var rutinasInactivas = jsonData.filter(rutina => rutina.activo === false);",
									"    pm.expect(rutinasInactivas.length).to.equal(0);",
									"});",
									"",
									"pm.test(\"Todas las rutinas están activas\", function () {",
									"    var jsonData = pm.response.json();",
									"    jsonData.forEach(function(rutina) {",
									"        pm.expect(rutina.activo).to.be.true;",
									"    });",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/admin/rutinas/activas",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"rutinas",
								"activas"
							]
						},
						"description": "**RN28:** Solo elementos activos pueden ser asignados.\n\nVerifica que el endpoint /activas solo retorna rutinas con activo=true."
					},
					"response": []
				}
			],
			"description": "Tests específicos para validar las Reglas de Negocio del Módulo 3."
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "jwt_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "plan_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "rutina_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "dia_id",
			"value": "",
			"type": "string"
		}
	]
}
