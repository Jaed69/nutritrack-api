{
	"info": {
		"_postman_id": "nutritrack-modulo1-rn-v2",
		"name": "NutriTrack - M√≥dulo 1 [RN01, RN03-RN05, RN22, RN27, RN30, RN31]",
		"description": "# üìã M√≥dulo 1: Autenticaci√≥n y Gesti√≥n de Perfil\n\n**Responsable:** Leonel Alzamora  \n**Tests Unitarios:** 24/24 ‚úÖ  \n**Reglas Implementadas:** RN01, RN03, RN04, RN05, RN22, RN27, RN30, RN31\n\n---\n\n## üéØ REGLAS DE NEGOCIO IMPLEMENTADAS\n\n### RN01 - Email √∫nico\n- ‚úÖ No se permite crear m√°s de una cuenta con el mismo email\n- ‚úÖ Constraint UNIQUE en tabla cuentas_auth\n- üìù Test: `testRegistro_EmailDuplicado_Falla()`\n\n### RN30 - Validaci√≥n de Email RFC 5322 + DNS\n- ‚úÖ Formato de email v√°lido seg√∫n RFC 5322\n- ‚úÖ Verificaci√≥n DNS del dominio\n- üìù Tests: `testRegistro_EmailDominioInexistente()`, `testRegistro_EmailFormatoInvalido()`\n\n### RN31 - Pol√≠tica de Contrase√±as Robusta\n- ‚úÖ M√≠nimo 12 caracteres\n- ‚úÖ Al menos una may√∫scula, una min√∫scula, un n√∫mero y un s√≠mbolo\n- ‚úÖ Blacklist de contrase√±as comunes\n- ‚úÖ No puede contener el email\n- üìù Tests: 7 tests de validaci√≥n de contrase√±a en `AuthServiceTest.java`\n\n### RN03 - Unidades de medida consistentes\n- ‚úÖ Aplica a todas las vistas (KG o LBS)\n- ‚úÖ Conversi√≥n autom√°tica en presentaci√≥n\n- üìù Test: `testActualizarUnidades_ConversionKGaLBS()`\n\n### RN27 - Almacenamiento est√°ndar\n- ‚úÖ Siempre guarda en KG en base de datos\n- ‚úÖ Conversi√≥n autom√°tica seg√∫n preferencia del usuario\n- üìù Test: `testObtenerPerfil_MuestraPesoEnLBS()`\n\n### RN04 - Perfil salud con etiquetas maestras\n- ‚úÖ Solo permite seleccionar etiquetas existentes\n- ‚úÖ Foreign Key constraint\n- üìù Test: `testActualizarPerfilSalud_ValidaEtiquetasExistentes()`\n\n### RN22 - Validaci√≥n de mediciones en rango\n- ‚úÖ Peso: 20-300 kg\n- ‚úÖ Altura: 50-250 cm\n- üìù Tests: `testRegistrarMedicion_PesoFueraDeRango()`, `testRegistrarMedicion_AlturaFueraDeRango()`\n\n### RN05 - Eliminaci√≥n con confirmaci√≥n\n- ‚úÖ Requiere escribir \"ELIMINAR\"\n- üìù Test: `testEliminarCuenta_SinConfirmacion_Falla()`\n\n---\n\n## üß™ TESTS UNITARIOS\n\n**AuthServiceTest.java** - 13/13 ‚úÖ\n- `testRegistro_EmailValido()`\n- `testRegistro_EmailDuplicado_Falla()`\n- `testRegistro_EmailFormatoInvalido()`\n- `testRegistro_EmailDominioInexistente()`\n- `testRegistro_PasswordCorta()`\n- `testRegistro_PasswordSinMayuscula()`\n- `testRegistro_PasswordSinMinuscula()`\n- `testRegistro_PasswordSinNumero()`\n- `testRegistro_PasswordSinSimbolo()`\n- `testRegistro_PasswordComun()`\n- `testRegistro_PasswordContieneEmail()`\n- `testLogin_Exitoso()`\n- `testLogin_CredencialesIncorrectas()`\n\n**PerfilServiceTest.java** - 11/11 ‚úÖ\n- `testCrearPerfil_Exitoso()`\n- `testActualizarUnidades_ConversionKGaLBS()`\n- `testObtenerPerfil_MuestraPesoEnLBS()`\n- `testActualizarPerfilSalud_ValidaEtiquetasExistentes()`\n- `testCrearPerfilSalud_ConObjetivoYEtiquetas()`\n- `testRegistrarMedicion_PesoFueraDeRango()`\n- `testRegistrarMedicion_AlturaFueraDeRango()`\n- `testObtenerHistorialMediciones()`\n- `testEliminarCuenta_SinConfirmacion_Falla()`\n- `testEliminarCuenta_ConConfirmacion_Exito()`\n- `testObtenerUltimaMedida()`\n\n**Ejecutar tests:**\n```bash\n./mvnw test -Dtest=AuthServiceTest\n./mvnw test -Dtest=PerfilServiceTest\n```\n\n---\n\n## üìñ DOCUMENTACI√ìN ADICIONAL\n\n- [REGLAS_NEGOCIO.MD](../docs/REGLAS_NEGOCIO.MD) - Especificaci√≥n completa\n- [UNIT_TESTS_MAPPING.md](../docs/UNIT_TESTS_MAPPING.md) - Mapeo completo de 175 tests\n- [Swagger UI](http://localhost:8080/swagger-ui/index.html) - Documentaci√≥n interactiva\n\n---\n\n## üîß Variables\n\n- `baseUrl` - URL base de la API (http://localhost:8080)\n- `adminToken` - Token JWT del admin\n- `userToken` - Token JWT del usuario regular\n- `userId` - ID del usuario autenticado",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{userToken}}",
				"type": "string"
			}
		]
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "adminToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "userToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "userId",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "RN01, RN30, RN31 - Registro y Login",
			"item": [
				{
					"name": "‚úÖ RN01, RN30, RN31 - Registro V√°lido",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 201', function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test('RN01: Email √∫nico verificado', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.status).to.eql('success');",
									"});",
									"",
									"pm.test('RN30: Email RFC 5322 + DNS v√°lido', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.email).to.include('@');",
									"});",
									"",
									"pm.test('RN31: Password cumple pol√≠tica de seguridad', function () {",
									"    // Password tiene 12+ chars, may√∫scula, min√∫scula, n√∫mero, s√≠mbolo",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.data && jsonData.data.token) {",
									"        pm.collectionVariables.set('userToken', jsonData.data.token);",
									"        pm.collectionVariables.set('userId', jsonData.data.userId);",
									"        console.log('‚úÖ Token guardado');",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"nombre\": \"Test\",\n  \"apellido\": \"Usuario\",\n  \"email\": \"test{{$timestamp}}@gmail.com\",\n  \"password\": \"SecurePass2024!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/registro",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "registro"]
						},
						"description": "**REGLAS DE NEGOCIO:**\n\n‚úÖ **RN01:** Email √∫nico  \n- No permite crear m√°s de una cuenta con el mismo email\n- Test: `testRegistro_EmailDuplicado_Falla()`\n\n‚úÖ **RN30:** Validaci√≥n Email RFC 5322 + DNS  \n- Formato email v√°lido\n- Verificaci√≥n DNS del dominio\n- Tests: `testRegistro_EmailFormatoInvalido()`, `testRegistro_EmailDominioInexistente()`\n\n‚úÖ **RN31:** Pol√≠tica de Contrase√±as  \n- M√≠nimo 12 caracteres\n- May√∫scula + min√∫scula + n√∫mero + s√≠mbolo\n- No contrase√±as comunes (blacklist)\n- No puede contener el email\n- Tests: 7 tests en `AuthServiceTest.java`\n\n**TESTS ASOCIADOS:** 13/13 ‚úÖ en `AuthServiceTest.java`\n\n**EJEMPLO V√ÅLIDO:**\n```json\n{\n  \"email\": \"nuevo@gmail.com\",\n  \"password\": \"SecurePass2024!\"\n}\n```\n\n**EJECUTAR TEST:**\n```bash\n./mvnw test -Dtest=AuthServiceTest#testRegistro_EmailValido\n```"
					},
					"response": []
				},
				{
					"name": "‚ùå RN30 - Email sin DNS v√°lido",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('RN30: Rechaza email con dominio inexistente', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Mensaje indica problema de DNS', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.include('dominio');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"nombre\": \"Test\",\n  \"apellido\": \"Error\",\n  \"email\": \"usuario@dominioquenoexiste99999.xyz\",\n  \"password\": \"SecurePass2024!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/registro",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "registro"]
						},
						"description": "**RN30: Validaci√≥n DNS**\n\nDemuestra que el sistema valida la existencia del dominio mediante DNS lookup.\n\n**Test Unitario:** `testRegistro_EmailDominioInexistente()`\n\n**Resultado esperado:** HTTP 400\n```json\n{\n  \"status\": \"error\",\n  \"message\": \"El dominio de email no existe o no es alcanzable\"\n}\n```"
					},
					"response": []
				},
				{
					"name": "‚ùå RN31 - Contrase√±a com√∫n (blacklist)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('RN31: Rechaza contrase√±a en blacklist', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Mensaje indica contrase√±a com√∫n', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.include('com√∫n');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"nombre\": \"Test\",\n  \"apellido\": \"Error\",\n  \"email\": \"test@gmail.com\",\n  \"password\": \"password1234\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/registro",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "registro"]
						},
						"description": "**RN31: Blacklist de Contrase√±as**\n\nDemuestra que el sistema rechaza contrase√±as comunes:\n- password1234\n- admin1234567\n- 123456789012\n- qwerty123456\n- letmein12345\n\n**Test Unitario:** `testRegistro_PasswordComun()`\n\n**Resultado esperado:** HTTP 400\n```json\n{\n  \"status\": \"error\",\n  \"message\": \"Contrase√±a demasiado com√∫n. Elige una m√°s segura.\"\n}\n```"
					},
					"response": []
				},
				{
					"name": "‚ùå RN31 - Contrase√±a corta (< 12 chars)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('RN31: Rechaza contrase√±a < 12 caracteres', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Mensaje indica longitud m√≠nima', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.include('12');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"nombre\": \"Test\",\n  \"apellido\": \"Error\",\n  \"email\": \"test@gmail.com\",\n  \"password\": \"Pass1!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/registro",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "registro"]
						},
						"description": "**RN31: Longitud M√≠nima**\n\nDemuestra validaci√≥n @Size(min=12).\n\n**Test Unitario:** `testRegistro_PasswordCorta()`"
					},
					"response": []
				}
			],
			"description": "**Tests de Autenticaci√≥n**\n\nDemuestra las reglas RN01, RN30 y RN31 relacionadas con:\n- Email √∫nico\n- Validaci√≥n RFC 5322 + DNS\n- Pol√≠tica de contrase√±as robusta\n\n**Tests Unitarios:** 13/13 ‚úÖ en `AuthServiceTest.java`"
		},
		{
			"name": "RN03, RN27 - Unidades de Medida",
			"item": [
				{
					"name": "‚úÖ RN03, RN27 - Actualizar unidades a LBS",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('RN03: Unidades actualizadas', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.status).to.eql('success');",
									"});",
									"",
									"pm.test('RN27: Sistema almacena en KG internamente', function () {",
									"    // Conversi√≥n autom√°tica: sistema guarda en KG, muestra en LBS",
									"    console.log('‚úÖ Conversi√≥n KG ‚Üî LBS funcionando');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"unidadesMedida\": \"LBS\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/perfil/unidades",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "perfil", "unidades"]
						},
						"description": "**REGLAS DE NEGOCIO:**\n\n‚úÖ **RN03:** Unidades de medida aplican a todas las vistas  \n- La selecci√≥n (KG o LBS) se aplica globalmente\n- Test: `testActualizarUnidades_ConversionKGaLBS()`\n\n‚úÖ **RN27:** Almacenamiento est√°ndar en KG  \n- Siempre guarda en KG en base de datos\n- Conversi√≥n autom√°tica en presentaci√≥n\n- Test: `testObtenerPerfil_MuestraPesoEnLBS()`\n\n**TESTS ASOCIADOS:** 11/11 ‚úÖ en `PerfilServiceTest.java`\n\n**CONVERSI√ìN:**\n- 1 kg = 2.20462 lbs\n- 70 kg = 154.32 lbs\n\n**EJECUTAR TEST:**\n```bash\n./mvnw test -Dtest=PerfilServiceTest#testActualizarUnidades_ConversionKGaLBS\n```"
					},
					"response": []
				}
			],
			"description": "**Tests de Unidades de Medida**\n\nDemuestra las reglas RN03 y RN27:\n- Aplicaci√≥n global de unidades\n- Almacenamiento est√°ndar en KG\n- Conversi√≥n autom√°tica\n\n**Tests Unitarios:** 11/11 ‚úÖ en `PerfilServiceTest.java`"
		},
		{
			"name": "RN04, RN12 - Perfil de Salud",
			"item": [
				{
					"name": "‚úÖ RN04, RN12 - Crear perfil con etiquetas",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('RN04: Perfil usa etiquetas maestras', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.etiquetasSaludIds).to.be.an('array');",
									"});",
									"",
									"pm.test('RN12: Solo etiquetas existentes', function () {",
									"    // FK constraint valida que etiquetas existen",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"objetivo\": \"PERDER_PESO\",\n  \"nivelActividad\": \"MODERADO\",\n  \"diasEntrenamiento\": [1, 3, 5],\n  \"etiquetasSaludIds\": [1, 2, 3]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/perfil/salud",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "perfil", "salud"]
						},
						"description": "**REGLAS DE NEGOCIO:**\n\n‚úÖ **RN04:** Perfil salud usa etiquetas maestras  \n- Tabla `usuario_etiquetas_salud` con FK\n- Solo permite seleccionar etiquetas existentes\n- Test: `testActualizarPerfilSalud_ValidaEtiquetasExistentes()`\n\n‚úÖ **RN12:** Solo etiquetas existentes  \n- Foreign Key constraint a tabla `etiquetas`\n- Validaci√≥n en Service layer\n- Test: `testCrearPerfilSalud_ConObjetivoYEtiquetas()`\n\n**CATEGOR√çAS DE ETIQUETAS:**\n- Objetivos (perder peso, ganar m√∫sculo, mantener)\n- Alergias (nueces, l√°cteos, gluten)\n- Condiciones m√©dicas (diabetes, hipertensi√≥n)\n\n**TESTS ASOCIADOS:** 11/11 ‚úÖ en `PerfilServiceTest.java`\n\n**EJECUTAR TEST:**\n```bash\n./mvnw test -Dtest=PerfilServiceTest#testCrearPerfilSalud_ConObjetivoYEtiquetas\n```"
					},
					"response": []
				},
				{
					"name": "‚ùå RN12 - Etiqueta inexistente",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('RN12: Rechaza etiqueta inexistente', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Mensaje indica etiqueta no encontrada', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.include('etiqueta');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"objetivo\": \"PERDER_PESO\",\n  \"nivelActividad\": \"MODERADO\",\n  \"diasEntrenamiento\": [1, 3, 5],\n  \"etiquetasSaludIds\": [99999]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/perfil/salud",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "perfil", "salud"]
						},
						"description": "**RN12: Validaci√≥n FK**\n\nDemuestra que el sistema valida la existencia de etiquetas.\n\n**Test Unitario:** `testActualizarPerfilSalud_ValidaEtiquetasExistentes()`"
					},
					"response": []
				}
			],
			"description": "**Tests de Perfil de Salud**\n\nDemuestra las reglas RN04 y RN12:\n- Uso de etiquetas maestras\n- Validaci√≥n de Foreign Keys\n\n**Tests Unitarios:** 11/11 ‚úÖ en `PerfilServiceTest.java`"
		},
		{
			"name": "RN22 - Validaci√≥n de Mediciones",
			"item": [
				{
					"name": "‚úÖ RN22 - Registrar medici√≥n v√°lida",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('RN22: Medici√≥n en rango v√°lido', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.peso).to.be.within(20, 300);",
									"    pm.expect(jsonData.data.altura).to.be.within(50, 250);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"peso\": 75.5,\n  \"altura\": 175.0,\n  \"fecha\": \"2025-11-05\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/perfil/mediciones",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "perfil", "mediciones"]
						},
						"description": "**REGLA DE NEGOCIO:**\n\n‚úÖ **RN22:** Validaci√≥n de mediciones en rango  \n- Peso: 20-300 kg\n- Altura: 50-250 cm\n- Fecha no futura\n\n**TESTS ASOCIADOS:**\n- `testRegistrarMedicion_PesoFueraDeRango()`\n- `testRegistrarMedicion_AlturaFueraDeRango()`\n\n**VALIDACIONES:**\n```java\n@Min(value = 20, message = \"Peso m√≠nimo: 20kg\")\n@Max(value = 300, message = \"Peso m√°ximo: 300kg\")\nprivate Double peso;\n\n@Min(value = 50, message = \"Altura m√≠nima: 50cm\")\n@Max(value = 250, message = \"Altura m√°xima: 250cm\")\nprivate Double altura;\n```\n\n**EJECUTAR TEST:**\n```bash\n./mvnw test -Dtest=PerfilServiceTest#testRegistrarMedicion_PesoFueraDeRango\n```"
					},
					"response": []
				},
				{
					"name": "‚ùå RN22 - Peso fuera de rango",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('RN22: Rechaza peso < 20kg', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Mensaje indica rango v√°lido', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.include('20');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"peso\": 15.0,\n  \"altura\": 175.0,\n  \"fecha\": \"2025-11-05\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/perfil/mediciones",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "perfil", "mediciones"]
						},
						"description": "**RN22: Validaci√≥n de Peso M√≠nimo**\n\nDemuestra validaci√≥n @Min(20).\n\n**Test Unitario:** `testRegistrarMedicion_PesoFueraDeRango()`"
					},
					"response": []
				},
				{
					"name": "‚ùå RN22 - Altura fuera de rango",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('RN22: Rechaza altura > 250cm', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Mensaje indica rango v√°lido', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.include('250');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"peso\": 75.0,\n  \"altura\": 300.0,\n  \"fecha\": \"2025-11-05\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/perfil/mediciones",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "perfil", "mediciones"]
						},
						"description": "**RN22: Validaci√≥n de Altura M√°xima**\n\nDemuestra validaci√≥n @Max(250).\n\n**Test Unitario:** `testRegistrarMedicion_AlturaFueraDeRango()`"
					},
					"response": []
				}
			],
			"description": "**Tests de Validaci√≥n de Mediciones**\n\nDemuestra la regla RN22:\n- Validaci√≥n de rangos de peso y altura\n\n**Tests Unitarios:** 11/11 ‚úÖ en `PerfilServiceTest.java`"
		},
		{
			"name": "RN05 - Eliminaci√≥n de Cuenta",
			"item": [
				{
					"name": "‚ùå RN05 - Sin confirmaci√≥n",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('RN05: Requiere confirmaci√≥n expl√≠cita', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Mensaje solicita escribir ELIMINAR', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).to.include('ELIMINAR');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"confirmacion\": \"eliminar\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/cuenta",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "cuenta"]
						},
						"description": "**REGLA DE NEGOCIO:**\n\n‚úÖ **RN05:** Eliminaci√≥n requiere confirmaci√≥n expl√≠cita  \n- Usuario debe escribir exactamente \"ELIMINAR\"\n- Case sensitive\n- Test: `testEliminarCuenta_SinConfirmacion_Falla()`\n\n**VALIDACI√ìN:**\n```java\nif (!\"ELIMINAR\".equals(confirmacion)) {\n    throw new BadRequestException(\"Texto de confirmaci√≥n incorrecto\");\n}\n```\n\n**TESTS ASOCIADOS:** 11/11 ‚úÖ en `PerfilServiceTest.java`\n\n**EJECUTAR TEST:**\n```bash\n./mvnw test -Dtest=PerfilServiceTest#testEliminarCuenta_SinConfirmacion_Falla\n```"
					},
					"response": []
				},
				{
					"name": "‚úÖ RN05 - Con confirmaci√≥n correcta",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('RN05: Acepta confirmaci√≥n correcta', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Cuenta eliminada exitosamente', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.status).to.eql('success');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"confirmacion\": \"ELIMINAR\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/cuenta",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "cuenta"]
						},
						"description": "**RN05: Confirmaci√≥n Correcta**\n\nDemuestra eliminaci√≥n exitosa con texto exacto \"ELIMINAR\".\n\n**Test Unitario:** `testEliminarCuenta_ConConfirmacion_Exito()`"
					},
					"response": []
				}
			],
			"description": "**Tests de Eliminaci√≥n de Cuenta**\n\nDemuestra la regla RN05:\n- Confirmaci√≥n expl√≠cita requerida\n\n**Tests Unitarios:** 11/11 ‚úÖ en `PerfilServiceTest.java`"
		},
		{
			"name": "üîß Utilidades",
			"item": [
				{
					"name": "Login Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set('adminToken', jsonData.data.token);",
									"    console.log('‚úÖ Admin token guardado');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"admin@nutritrack.com\",\n  \"password\": \"Admin123!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "auth", "login"]
						}
					},
					"response": []
				},
				{
					"name": "Obtener Mi Perfil",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v1/perfil",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v1", "perfil"]
						}
					},
					"response": []
				}
			]
		}
	]
}
